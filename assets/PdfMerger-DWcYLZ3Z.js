import{j as e}from"./index-D62iepav.js";import{L as U}from"./Layout-7YO7GSX_.js";import{r as m}from"./react-vendor-CjoZ0FnW.js";import{P as j}from"./pdf-lib-CPC-NNo0.js";import{F as u,I as x,b as A,L as B,c as L,d as J,e as K}from"./ui-Bjy91_IB.js";function X(){const[n,g]=m.useState([]),[r,p]=m.useState([]),[f,h]=m.useState(!1),[v,o]=m.useState(!1),[c,N]=m.useState("pdfs"),[w,D]=m.useState(!1);m.useEffect(()=>{const s=window.location.hash.substring(1);s==="pdfs"?N("pdfs"):s==="images"?N("images"):s==="both"&&N("both"),(()=>{c&&c!=="pdfs"&&window.history.replaceState(null,null,`#${c}`)})()},[c]);const P=s=>{N(s),window.history.replaceState(null,null,`#${s}`)},S=s=>{const i=Array.from(s.target.files);g([...n,...i]),o(!1)},$=s=>{const i=Array.from(s.target.files);p([...r,...i]),o(!1)},F=s=>{s.preventDefault(),s.stopPropagation(),D(!0)},C=s=>{s.preventDefault(),s.stopPropagation(),D(!1)},z=s=>{s.preventDefault(),s.stopPropagation()},E=s=>{if(s.preventDefault(),s.stopPropagation(),D(!1),s.dataTransfer.files&&s.dataTransfer.files.length>0){const i=Array.from(s.dataTransfer.files);if(c==="pdfs"){const a=i.filter(t=>t.type==="application/pdf");a.length>0&&g([...n,...a])}else if(c==="images"){const a=i.filter(t=>t.type==="image/jpeg"||t.type==="image/jpg"||t.type==="image/png");a.length>0&&p([...r,...a])}else if(c==="both"){const a=i.filter(l=>l.type==="application/pdf"),t=i.filter(l=>l.type==="image/jpeg"||l.type==="image/jpg"||l.type==="image/png");a.length>0&&g([...n,...a]),t.length>0&&p([...r,...t])}o(!1)}},y=(s,i)=>{if(s==="pdf"){const a=[...n];a.splice(i,1),g(a)}else{const a=[...r];a.splice(i,1),p(a)}o(!1)},I=()=>{c==="pdfs"?g([]):c==="images"?p([]):(g([]),p([])),o(!1)},T=async()=>{h(!0),o(!1);try{const s=await j.create(),i=n.sort((a,t)=>a.name.localeCompare(t.name,void 0,{numeric:!0,sensitivity:"base"}));for(const a of i)try{const t=await a.arrayBuffer(),l=await j.load(t);(await s.copyPages(l,l.getPageIndices())).forEach(d=>s.addPage(d))}catch(t){console.error(`Error processing file ${a.name}:`,t);continue}if(s.getPageCount()===0)throw new Error("No valid PDF pages could be processed. Please check your files.");k(await s.save(),"merged-pdfs.pdf"),o(!0)}catch(s){console.error("Error merging PDFs:",s),alert("An error occurred while merging PDF files: "+s.message)}finally{h(!1)}},R=async()=>{h(!0),o(!1);try{const s=await j.create(),i=r.sort((a,t)=>a.name.localeCompare(t.name));for(const a of i){const t=await a.arrayBuffer();let l;if(a.type==="image/jpeg"||a.type==="image/jpg")try{l=await s.embedJpg(t)}catch(d){alert("Error processing JPEG file: "+a.name+". "+d.message);continue}else if(a.type==="image/png")try{l=await s.embedPng(t)}catch(d){alert("Error processing PNG file: "+a.name+". "+d.message);continue}else{alert("Unsupported file type: "+a.type);return}s.addPage([l.width,l.height]).drawImage(l,{x:0,y:0,width:l.width,height:l.height})}k(await s.save(),"merged-images.pdf"),o(!0)}catch(s){console.error("Error merging images:",s),alert("An error occurred while merging image files. Please try again.")}finally{h(!1)}},G=async()=>{h(!0),o(!1);try{const s=await j.create(),i=[...n,...r].sort((a,t)=>a.name.localeCompare(t.name));for(const a of i)if(a.type==="application/pdf"){const t=await a.arrayBuffer(),l=await j.load(t);(await s.copyPages(l,l.getPageIndices())).forEach(d=>s.addPage(d))}else if(a.type==="image/jpeg"||a.type==="image/jpg"||a.type==="image/png"){const t=await a.arrayBuffer();let l;if(a.type==="image/jpeg"||a.type==="image/jpg")try{l=await s.embedJpg(t)}catch(d){alert("Error processing JPEG file: "+a.name+". "+d.message);continue}else if(a.type==="image/png")try{l=await s.embedPng(t)}catch(d){alert("Error processing PNG file: "+a.name+". "+d.message);continue}s.addPage([l.width,l.height]).drawImage(l,{x:0,y:0,width:l.width,height:l.height})}else{alert("Unsupported file type: "+a.type);return}k(await s.save(),"merged-pdfs-and-images.pdf"),o(!0)}catch(s){console.error("Error merging files:",s),alert("An error occurred while merging files. Please try again.")}finally{h(!1)}},k=(s,i)=>{const a=new Blob([s],{type:"application/pdf"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=i,document.body.appendChild(l),l.click(),document.body.removeChild(l)},b=s=>{if(s===0)return"0 Bytes";const i=1024,a=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(s)/Math.log(i));return parseFloat((s/Math.pow(i,t)).toFixed(2))+" "+a[t]},O=e.jsxs("div",{className:"info-box",children:[e.jsx(K,{size:20}),e.jsx("p",{children:"Merge PDFs and Images into a single document with ease. Files will be merged in alphabetical order by filename."})]});return e.jsxs(U,{title:"Merge PDFs & Images Instantly",description:O,children:[e.jsxs("div",{className:"tab-container",children:[e.jsxs("button",{className:`tab-button ${c==="pdfs"?"active":""}`,onClick:()=>P("pdfs"),children:[e.jsx(u,{size:18}),"Merge PDFs"]}),e.jsxs("button",{className:`tab-button ${c==="images"?"active":""}`,onClick:()=>P("images"),children:[e.jsx(x,{size:18}),"Merge Images"]}),e.jsxs("button",{className:`tab-button ${c==="both"?"active":""}`,onClick:()=>P("both"),children:[e.jsx(u,{size:18}),e.jsx(x,{size:18}),"Merge Both"]})]}),e.jsxs("div",{className:"tab-content",children:[c==="pdfs"&&e.jsxs("section",{className:"merge-section",children:[e.jsx("div",{className:`drop-zone ${w?"active":""}`,onDragEnter:F,onDragLeave:C,onDragOver:z,onDrop:E,children:e.jsxs("div",{className:"drop-zone-content",children:[e.jsx(A,{size:48,className:"upload-icon"}),e.jsx("p",{children:"Drag & drop PDF files here, or"}),e.jsxs("label",{className:"file-input-label",children:[e.jsx("span",{children:"Choose Files"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf",onChange:S,className:"file-input"})]})]})}),n.length>0&&e.jsxs("div",{className:"file-list-container",children:[e.jsxs("div",{className:"file-list-header",children:[e.jsxs("h3",{children:["Selected PDFs: ",n.length]}),e.jsx("button",{onClick:I,className:"clear-button",children:"Clear All"})]}),e.jsx("div",{className:"file-list",children:e.jsx("ul",{children:n.map((s,i)=>e.jsxs("li",{className:"file-item",children:[e.jsxs("div",{className:"file-info",children:[e.jsx(u,{size:16,className:"file-icon"}),e.jsx("span",{className:"file-name",children:s.name}),e.jsx("span",{className:"file-size",children:b(s.size)})]}),e.jsx("button",{className:"remove-file",onClick:()=>y("pdf",i),"aria-label":"Remove file",children:"×"})]},i))})}),e.jsx("button",{onClick:T,disabled:n.length===0||f,className:"merge-button",children:f?e.jsx(B,{className:"spinner"}):"Merge PDFs"}),v&&e.jsxs("div",{className:"success-message",children:[e.jsx(L,{size:18}),e.jsx("span",{children:"PDFs merged successfully!"})]})]})]}),c==="images"&&e.jsxs("section",{className:"merge-section",children:[e.jsx("div",{className:`drop-zone ${w?"active":""}`,onDragEnter:F,onDragLeave:C,onDragOver:z,onDrop:E,children:e.jsxs("div",{className:"drop-zone-content",children:[e.jsx(A,{size:48,className:"upload-icon"}),e.jsx("p",{children:"Drag & drop image files here, or"}),e.jsxs("label",{className:"file-input-label",children:[e.jsx("span",{children:"Choose Files"}),e.jsx("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png",onChange:$,className:"file-input"})]})]})}),r.length>0&&e.jsxs("div",{className:"file-list-container",children:[e.jsxs("div",{className:"file-list-header",children:[e.jsxs("h3",{children:["Selected Images: ",r.length]}),e.jsx("button",{onClick:I,className:"clear-button",children:"Clear All"})]}),e.jsx("div",{className:"file-list",children:e.jsx("ul",{children:r.map((s,i)=>e.jsxs("li",{className:"file-item",children:[e.jsxs("div",{className:"file-info",children:[e.jsx(x,{size:16,className:"file-icon"}),e.jsx("span",{className:"file-name",children:s.name}),e.jsx("span",{className:"file-size",children:b(s.size)})]}),e.jsx("button",{className:"remove-file",onClick:()=>y("image",i),"aria-label":"Remove file",children:"×"})]},i))})}),e.jsx("button",{onClick:R,disabled:r.length===0||f,className:"merge-button",children:f?e.jsx(B,{className:"spinner"}):"Merge Images"}),v&&e.jsxs("div",{className:"success-message",children:[e.jsx(L,{size:18}),e.jsx("span",{children:"Images merged successfully!"})]})]})]}),c==="both"&&e.jsxs("section",{className:"merge-section",children:[e.jsx("div",{className:"drop-zones-container",children:e.jsx("div",{className:`drop-zone ${w?"active":""}`,onDragEnter:F,onDragLeave:C,onDragOver:z,onDrop:E,children:e.jsxs("div",{className:"drop-zone-content",children:[e.jsx(A,{size:40,className:"upload-icon"}),e.jsx("p",{children:"Drag & drop files here, or"}),e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{className:"file-input-label",children:[e.jsx(u,{size:16}),e.jsx("span",{children:"Choose PDFs"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf",onChange:S,className:"file-input"})]}),e.jsxs("label",{className:"file-input-label",children:[e.jsx(x,{size:16}),e.jsx("span",{children:"Choose Images"}),e.jsx("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png",onChange:$,className:"file-input"})]})]})]})})}),(n.length>0||r.length>0)&&e.jsxs("div",{className:"file-list-container",children:[e.jsxs("div",{className:"file-list-header",children:[e.jsxs("h3",{children:["Selected Files: ",n.length+r.length]}),e.jsx("button",{onClick:I,className:"clear-button",children:"Clear All"})]}),e.jsxs("div",{className:"file-list",children:[n.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"file-category",children:["PDFs (",n.length,")"]}),e.jsx("ul",{children:n.map((s,i)=>e.jsxs("li",{className:"file-item",children:[e.jsxs("div",{className:"file-info",children:[e.jsx(u,{size:16,className:"file-icon"}),e.jsx("span",{className:"file-name",children:s.name}),e.jsx("span",{className:"file-size",children:b(s.size)})]}),e.jsx("button",{className:"remove-file",onClick:()=>y("pdf",i),"aria-label":"Remove file",children:"×"})]},`pdf-${i}`))})]}),r.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"file-category",children:["Images (",r.length,")"]}),e.jsx("ul",{children:r.map((s,i)=>e.jsxs("li",{className:"file-item",children:[e.jsxs("div",{className:"file-info",children:[e.jsx(x,{size:16,className:"file-icon"}),e.jsx("span",{className:"file-name",children:s.name}),e.jsx("span",{className:"file-size",children:b(s.size)})]}),e.jsx("button",{className:"remove-file",onClick:()=>y("image",i),"aria-label":"Remove file",children:"×"})]},`img-${i}`))})]})]}),e.jsxs("div",{className:"merge-info",children:[e.jsx(J,{size:16}),e.jsx("span",{children:"Files will be merged in alphabetical order by filename."})]}),e.jsx("button",{onClick:G,disabled:n.length===0&&r.length===0||f,className:"merge-button",children:f?e.jsx(B,{className:"spinner"}):"Merge All Files"}),v&&e.jsxs("div",{className:"success-message",children:[e.jsx(L,{size:18}),e.jsx("span",{children:"Files merged successfully!"})]})]})]})]})]})}export{X as default};
//# sourceMappingURL=PdfMerger-DWcYLZ3Z.js.map
