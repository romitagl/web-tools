import{j as e}from"./index-D62iepav.js";import{L as je}from"./Layout-7YO7GSX_.js";import{g as fe,r as a}from"./react-vendor-CjoZ0FnW.js";import{r as ve,H as P,a as Ne}from"./qrcode-vendor-hOVvWyDU.js";import{Q as D,f as Ce,g as we,R as T,D as be,S as Se,c as ye,h as Re,i as ae,e as Ee,W as Fe,U as Qe}from"./ui-Bjy91_IB.js";var qe=ve();const ke=fe(qe);function Te(){const te=[{id:"url",label:"URL",icon:e.jsx(ae,{size:18}),placeholder:"https://example.com"},{id:"text",label:"Text",icon:e.jsx(D,{size:18}),placeholder:"Enter your text here"},{id:"wifi",label:"Wi-Fi",icon:e.jsx(Fe,{size:18}),placeholder:"SSID"},{id:"contact",label:"Contact",icon:e.jsx(Qe,{size:18}),placeholder:"Contact details"}],[r,ne]=a.useState("url"),[h,y]=a.useState(""),[R,re]=a.useState("#000000"),[E,ie]=a.useState("#FFFFFF"),[F,oe]=a.useState(200),[j,I]=a.useState(""),[f,$]=a.useState("generate"),[p,m]=a.useState(""),[ce,Q]=a.useState(!1),[q,le]=a.useState(!1),[L,U]=a.useState(!1),[x,i]=a.useState(!1),[v,t]=a.useState(""),[g,o]=a.useState(!1),[G,H]=a.useState(null),[k,O]=a.useState(""),[V,B]=a.useState(""),[M,_]=a.useState("WPA"),[Z,J]=a.useState(!1),[N,K]=a.useState(""),[C,X]=a.useState(""),[w,Y]=a.useState(""),[W,ee]=a.useState("");a.useRef(null);const z=a.useRef(null),n=a.useRef(null);a.useRef(null);const A=()=>{y(""),O(""),B(""),_("WPA"),J(!1),K(""),X(""),Y(""),ee(""),I(""),m(""),t(""),Q(!1),H(null)},de=()=>{switch(r){case"wifi":return`WIFI:S:${k};T:${M};P:${V};H:${Z?"true":"false"};;`;case"contact":let s=`BEGIN:VCARD
VERSION:3.0
`;return N&&(s+=`FN:${N}
`),C&&(s+=`EMAIL:${C}
`),w&&(s+=`TEL:${w}
`),W&&(s+=`ADR:;;${W};;;;
`),s+="END:VCARD",s;default:return h}},se=s=>{s!==f&&(x&&b(),$(s),A(),window.history.replaceState(null,null,`#${s}`))};a.useEffect(()=>{const s=window.location.hash.substring(1);(s==="generate"||s==="scan")&&$(s)},[]);const ue=async()=>{t(""),U(!0);try{if(r==="url"&&!h)throw new Error("Please enter a URL");if(r==="text"&&!h)throw new Error("Please enter some text");if(r==="wifi"&&!k)throw new Error("Please enter the Wi-Fi name (SSID)");if(r==="contact"&&!(N||C||w))throw new Error("Please enter at least one contact detail");const s=de(),c={errorCorrectionLevel:"H",type:"image/png",quality:.92,margin:1,color:{dark:R,light:E},width:F},d=await ke.toDataURL(s,c);I(d)}catch(s){console.error("Error generating QR code:",s),t(s.message||"Error generating QR code")}finally{U(!1)}},he=async()=>{m(""),t(""),i(!0),o(!0);try{if(!P)throw new Error("QR code scanner library not loaded");setTimeout(()=>{try{if(!z.current)throw new Error("Scanner container not available");const s=new P(z.current.id);n.current=s;const c={fps:10,qrbox:{width:250,height:250},aspectRatio:1,formatsToSupport:[Ne.QR_CODE]},d=(l,u)=>{console.log(`QR Code detected: ${l}`,u),m(l),b()};s.start({facingMode:"environment"},c,d,l=>{console.log("QR Code scanning error:",l)}).catch(l=>{console.error("Error starting camera:",l),t(`Error starting camera: ${l.message}`),i(!1)}),setTimeout(()=>{x&&n.current&&(t("Scanning timed out after 15 seconds. Please try again or use the file upload option."),b())},15e3)}catch(s){console.error("Error starting QR code scanner:",s),i(!1),o(!1),t(s.message||"Error starting QR code scanner")}},500)}catch(s){console.error("Error accessing camera:",s),i(!1),o(!1),t(s.message||"Error accessing camera")}},b=()=>{console.log("Stopping scanner"),n.current&&n.current.isScanning?n.current.stop().then(()=>{console.log("QR Code scanning stopped"),i(!1),o(!1)}).catch(s=>{console.error("Error stopping QR Code scanner:",s),i(!1),o(!1)}):(i(!1),o(!1))},pe=s=>{m(""),t("");const c=s.target.files[0];if(!c)return;H(c);const d=new FileReader;d.onload=l=>{let u;n.current?u=n.current:(u=new P("qr-reader-file"),n.current=u),u.scanFile(c,!0).then(S=>{console.log("QR Code detected from file:",S),m(S)}).catch(S=>{console.error("Error scanning file:",S),t("No QR code found in the image or the image could not be processed")})},d.onerror=()=>{t("Error reading the file")},d.readAsDataURL(c)},me=()=>{navigator.clipboard.writeText(p).then(()=>{Q(!0),setTimeout(()=>Q(!1),2e3)}).catch(s=>{console.error("Failed to copy text: ",s),t("Failed to copy to clipboard")})},xe=()=>{if(!j)return;const s=document.createElement("a");s.href=j,s.download=`qrcode-${Date.now()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)};a.useEffect(()=>()=>{n.current&&n.current.isScanning&&n.current.stop().then(()=>{console.log("QR Code scanner successfully stopped on component unmount")}).catch(s=>{console.error("Error stopping QR Code scanner:",s)})},[]);const ge=e.jsxs("div",{className:"info-banner",children:[e.jsx("div",{className:"info-icon",children:e.jsx(Ee,{size:20})}),e.jsx("div",{className:"info-content",children:"Create and scan QR codes instantly. Generate QR codes for URLs, text, Wi-Fi credentials, and contact information. All processing happens in your browser - no data is sent to servers."})]});return e.jsxs(je,{title:"QR Code Generator & Scanner",description:ge,children:[e.jsxs("div",{className:"tab-container",children:[e.jsxs("button",{className:`tab-button ${f==="generate"?"active":""}`,onClick:()=>se("generate"),children:[e.jsx(D,{size:18}),"Generate QR Code"]}),e.jsxs("button",{className:`tab-button ${f==="scan"?"active":""}`,onClick:()=>se("scan"),children:[e.jsx(Ce,{size:18}),"Scan QR Code"]})]}),e.jsx("div",{className:"qr-container",children:f==="generate"?e.jsxs("div",{className:"generator-section",children:[e.jsxs("div",{className:"qr-code-type",children:[e.jsx("h3",{children:"QR Code Type:"}),e.jsx("div",{className:"type-buttons",children:te.map(s=>e.jsxs("button",{className:`type-button ${r===s.id?"active":""}`,onClick:()=>{ne(s.id),A()},children:[s.icon,e.jsx("span",{children:s.label})]},s.id))})]}),e.jsxs("div",{className:"form-section",children:[r==="url"&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"url-input",children:"URL:"}),e.jsx("input",{id:"url-input",type:"url",value:h,onChange:s=>y(s.target.value),placeholder:"https://example.com",className:"text-input"})]}),r==="text"&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"text-input",children:"Text:"}),e.jsx("textarea",{id:"text-input",value:h,onChange:s=>y(s.target.value),placeholder:"Enter your text here",className:"textarea-input",rows:"4"})]}),r==="wifi"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"wifi-name",children:"Network Name (SSID):"}),e.jsx("input",{id:"wifi-name",type:"text",value:k,onChange:s=>O(s.target.value),placeholder:"Enter WiFi name",className:"text-input"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"wifi-password",children:"Password:"}),e.jsx("input",{id:"wifi-password",type:"password",value:V,onChange:s=>B(s.target.value),placeholder:"Enter WiFi password",className:"text-input"})]}),e.jsxs("div",{className:"input-row",children:[e.jsxs("div",{className:"input-group half-width",children:[e.jsx("label",{htmlFor:"wifi-encryption",children:"Encryption:"}),e.jsxs("select",{id:"wifi-encryption",value:M,onChange:s=>_(s.target.value),className:"select-input",children:[e.jsx("option",{value:"WPA",children:"WPA/WPA2"}),e.jsx("option",{value:"WEP",children:"WEP"}),e.jsx("option",{value:"",children:"None"})]})]}),e.jsx("div",{className:"input-group half-width checkbox-group",children:e.jsxs("label",{htmlFor:"wifi-hidden",className:"checkbox-label",children:[e.jsx("input",{id:"wifi-hidden",type:"checkbox",checked:Z,onChange:s=>J(s.target.checked),className:"checkbox-input"}),e.jsx("span",{children:"Hidden Network"})]})})]})]}),r==="contact"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"contact-name",children:"Name:"}),e.jsx("input",{id:"contact-name",type:"text",value:N,onChange:s=>K(s.target.value),placeholder:"Full Name",className:"text-input"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"contact-email",children:"Email:"}),e.jsx("input",{id:"contact-email",type:"email",value:C,onChange:s=>X(s.target.value),placeholder:"email@example.com",className:"text-input"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"contact-phone",children:"Phone:"}),e.jsx("input",{id:"contact-phone",type:"tel",value:w,onChange:s=>Y(s.target.value),placeholder:"+1 (123) 456-7890",className:"text-input"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"contact-address",children:"Address:"}),e.jsx("textarea",{id:"contact-address",value:W,onChange:s=>ee(s.target.value),placeholder:"Street, City, State, ZIP",className:"textarea-input",rows:"2"})]})]}),e.jsxs("div",{className:"advanced-options-toggle",onClick:()=>le(!q),children:[e.jsx(we,{size:16}),e.jsx("span",{children:q?"Hide Advanced Options":"Show Advanced Options"})]}),q&&e.jsxs("div",{className:"advanced-options",children:[e.jsxs("div",{className:"input-row",children:[e.jsxs("div",{className:"input-group half-width",children:[e.jsx("label",{htmlFor:"qr-color",children:"QR Color:"}),e.jsxs("div",{className:"color-input-container",children:[e.jsx("input",{id:"qr-color",type:"color",value:R,onChange:s=>re(s.target.value),className:"color-input"}),e.jsx("span",{className:"color-value",children:R})]})]}),e.jsxs("div",{className:"input-group half-width",children:[e.jsx("label",{htmlFor:"qr-bg-color",children:"Background:"}),e.jsxs("div",{className:"color-input-container",children:[e.jsx("input",{id:"qr-bg-color",type:"color",value:E,onChange:s=>ie(s.target.value),className:"color-input"}),e.jsx("span",{className:"color-value",children:E})]})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{htmlFor:"qr-size",children:["Size: ",F,"px"]}),e.jsx("input",{id:"qr-size",type:"range",min:"100",max:"500",step:"50",value:F,onChange:s=>oe(Number(s.target.value)),className:"range-input"})]})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{onClick:ue,disabled:L,className:"generate-button",children:L?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:18,className:"spinner"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:18}),e.jsx("span",{children:"Generate QR Code"})]})}),e.jsxs("button",{onClick:A,className:"reset-button",children:[e.jsx(T,{size:18}),e.jsx("span",{children:"Reset"})]})]}),v&&e.jsx("div",{className:"error-message",children:v})]}),j&&e.jsxs("div",{className:"qr-result",children:[e.jsx("div",{className:"qr-image-container",children:e.jsx("img",{src:j,alt:"Generated QR Code",className:"qr-image"})}),e.jsx("div",{className:"qr-actions",children:e.jsxs("button",{onClick:xe,className:"qr-action-button",children:[e.jsx(be,{size:18}),e.jsx("span",{children:"Download"})]})})]})]}):e.jsxs("div",{className:"scanner-section",children:[e.jsxs("div",{className:"scan-options-container",children:[e.jsx("div",{className:"camera-option",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:g,onChange:()=>o(!g)}),"Scan with Camera"]})}),g&&e.jsx("button",{onClick:g?x?b:he:null,className:"generate-button",children:x?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:18,className:"spinner"}),e.jsx("span",{children:"Scanning..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{size:18}),e.jsx("span",{children:"Start Camera"})]})}),e.jsx("div",{className:"or-divider",children:"OR"}),e.jsx("div",{className:"file-upload-container",children:e.jsxs("div",{className:"custom-file-upload",children:[e.jsxs("label",{className:"file-upload-button",children:["Upload QR Image",e.jsx("input",{type:"file",accept:"image/*",onChange:pe,style:{display:"none"}})]}),e.jsx("span",{className:"file-name-display",children:G?G.name:"no file selected"})]})})]}),g&&x&&e.jsx("div",{id:"qr-reader",ref:s=>{z.current=s,s&&(s.id="qr-reader")},style:{width:"100%",maxWidth:"500px",margin:"0 auto"}}),e.jsx("div",{id:"qr-reader-file",ref:s=>{s&&(s.id="qr-reader-file")},style:{display:"none"}}),p&&e.jsxs("div",{className:"scan-result",children:[e.jsx("h3",{children:"Scan Result:"}),e.jsx("div",{className:"scan-content",children:p}),e.jsxs("div",{className:"scan-actions",children:[e.jsx("button",{onClick:me,className:"qr-action-button",children:ce?e.jsxs(e.Fragment,{children:[e.jsx(ye,{size:18}),e.jsx("span",{children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{size:18}),e.jsx("span",{children:"Copy"})]})}),p.startsWith("http")&&e.jsxs("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"qr-action-button",children:[e.jsx(ae,{size:18}),e.jsx("span",{children:"Open Link"})]})]})]}),v&&e.jsx("div",{className:"error-message",children:v})]})})]})}export{Te as default};
//# sourceMappingURL=QrCodeTool-DRS-ybsO.js.map
